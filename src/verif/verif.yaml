
fragment:
  imports:
  - "${{ rootdir }}/packages/fwprotocol-defs/flow.yaml"
  - "${{ rootdir }}/packages/fwvip-wb/flow.yaml"

  tasks:
  - name: sim-img
    uses: hdlsim.${{ sim }}.SimImage
    needs:
    - hdlsim.${{ sim }}.SimLibUVM
    - org.featherweight-vip.fwvip-wb.sv-hvlsrc
    - org.featherweight-vip.fwvip-wb.vip-uvm-hvlsrc
    - rtl-src
    - env-hvlsrc
    - tests-hvlsrc
    - tb-hvlsrc
    with:
      top: 
      - fwspi_initiator_hvl_top
      trace: true
      defines:
      - TRACE_EN
  - name: sim-run
    uses: hdlsim.${{ sim }}.SimRun
    needs: [sim-img]

  fragments:
  - tb/tb.yaml
  - env/env.yaml
  - tests/tests.yaml
